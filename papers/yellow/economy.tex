\section{Economic survivability}

We outline following two properties required for long-term survivability of the chain:

\begin{itemize}
    \item{} coins with lost keys should be returned into circulation.
    Otherwise, after the end of the emission period, amount of the coins
    in the circulation will always decrease and eventually reach zero.
    \item{} nothing should be kept in the state forever and for free.
    Otherwise, the size of the state is always increasing with time, thus reducing clients performance.
\end{itemize}

To achieve this, we propose the following storage fee consensus rules.
Register $R3$ of a box contains tuple $(last\_height, tx\_id || out\_num)$, where $last\_height$ provided by a user
is used to determine the block height at the moment of transaction generation.
Transaction can only be put in the block of height $h$ if for every created box its $last\_height < h$.

Once the subsidized period for the box ends (that is,
$current\_block\_height \ge R3.last\_height + SP$, see $SP$ value below), anyone~(presumably a miner) can
create a new box $out$ with the exactly the same content (including the guarding
script) except the monetary value and $R3$ content. The monetary value is to 
reduced by $K \cdot B \cdot (out.R3.last\_height - self.R3.last\_height)$ maximum, where $B$ is the spent box size and $K$ is the storage cost of one byte.
Thus, the difference is to be paid to the miner.
If box value is less that the storage fee, all the box content including tokens goes to the miner.
$R3.tx\_id$ and $R3.out\_num$ content of created box should contain correct transaction id
and index, while $R3.last\_height$ should be set to $R3.last\_height$ of spending box
plus $SP$, to ensure that subsidized period starts over.

We propose the following concrete parameters:
\begin{itemize}
    \item{} $K$ - cost of storage of 1 byte of data in a State for 1 block.
    Should be determined by miner votes, $12 (Ergo/byte)$ by default, max value is 24.
    \item{} $SP$ - number of blocks, box can be stored in a State for free untouched.
    Since Ergo have tokens as a first-class citizens, it might be possible that tokens value
    sufficiently exceed Ergo value in a box, thus $SP$ should be big enough to protect users
    that only keep tokens in their boxes.
    However, $SP$ should not exceed emission length to reward miners.
    It is predefined $SP = 1051200 = 4$ years.
\end{itemize}