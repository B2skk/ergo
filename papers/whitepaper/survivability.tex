\section{Survivability}
\label{sec:survivability}

% well-tested solutions
% voting
% soft-forkability
% storage rent
% light clients (Пробелмы пользователей без легких клиентов, Дайджест узлы, nipopow/flight clients)

Being a platform for contractual money, Ergo should also support long-term contracts for a
period of a person's life.
At the same time, even young existing smart contract platforms are experiencing issues with performance degradation and
adaptability to external conditions.
This leads to a situation when a cryptocurrency depends on a small group of developers
that should provide a fixing hard-fork or the cryptocurrency won't survive.

The first common survivability issue is that in pursuit of popularity blockchain developers implement ad-hoc
solutions without proper preliminary research and testing.
Such solutions inevitably lead to bugs, hasty bug fixes, fixes of bug fixes and so on, making the network even less secure.
Ergo approach here is to use stable well-tested solutions, even if that leads to slower
short-term innovation applicability.
Most of Ergo solutions are formalized in scientific papers, presented at peer-reviewed conferences
and are widely discussed in the community.

Ergo is trying to fix known problems of blockchain technology without creating new problems.
As far as Ergo is a PoW blockchain, it easily allows to extract a small header from the block content.
Single header allows to validate the work done, while headers chain is enough to select the best chain
and synchronize the network.
Headers chain is much smaller than the full one, however it still growths linearly with time.
Hopefully, modern research of light clients~\cite{kiayias2017non,luuflyclient} provide a way to
synchronize the network by downloading even smaller piece of data, unlocking the ability to
use the network without any trust from low-end hardware like mobile phones.
In addition, Ergo uses authenticated state\cite{reyzin2017improving} and for any transaction included
a client may download a proof of its correctness.
This proof is generated by the block miner and allows to check all the state transitions:
transaction inputs were present in the state before its application,
transaction outputs were added after its application and no more changes were done to the state.
Thus, regardless of the blockchain size a regular user with a
mobile phone can join the network and start using Ergo with the same security
guarantees as a full node.

Although support of light clients solves problems of Ergo users, it does not solve problems
of Ergo miners that still should keep the whole state for efficient
transaction validation.
In existing blockchain systems, users can put arbitrary data to this state forever,
creating a lot of dust in it and increasing its size over time~\cite{perez2019another}.
This leads to serious security issues, as far as when the state does not fit in memory,
an adversary may generate transactions which validation become very slow due to required random
access to miners storage
leading to DoS attack like an attack to the Ethereum network in 2016~\cite{??}.
To prevent this Ergo uses economic solution analyzed in~\cite{chepurnoy2018systematic}: if an
output remains in the state for 4 years without being moved, a miner may charge a small fee for every
byte kept in the state.
This idea is similar to regular cloud storage services, however, it is new for
cryptocurrencies and has several important consequences.
First, Ergo mining will always be stable unlike Bitcoin and other PoW currencies
in which mining may become unstable after the
initial emission~\cite{carlsten2016instability}.
Second, state size growth becomes controllable and predictable reducing hardware requirements for Ergo miners.
Third, by collecting a storage fee from outdated boxes miners return coins to circulation preventing a steady decrease
of circulating supply due to lost keys~\cite{wsj2018}.
All these effects should support Ergo long-term survivability, both technically and economically.

Another important aspect of survivability is that the environment changes and a network should
adapt to changing hardware infrastructure, appearing ideas that may improve security or
scalability, arising use-cases and so on.
If all the rules are fixed without any ability to change them in a decentralized manner, even
simple constant change may lead to huge debates and community split, e.g. discussion of a block
size limit in Bitcoin led to the network split into several independent coins.
In contrast, Ergo protocol is self-amendable and is able to adapt to the changing environment.
In Ergo parameters like block size can be changed on-the-fly via miners voting.
At the beginning of a 1024 blocks length voting epoch miner is proposing changes~(up to 2 parameters,
e.g. to increase block size and to decrease storage fee factor) and during the rest of the epoch miners
vote whether to approve these changes or not.
If the majority of votes within an epoch are supporting some~(or both) of these changes, a new value of the
parameter should be written into the extension section of the first block of the next epoch and the
network starts to use this update parameter value during block mining and validation.

To absorb more fundamental changes, Ergo is following the approach of soft-forkability, that
allows to change protocol significantly but keeping old nodes operating.
At the beginning of an epoch, a miner can also propose to vote for a fundamental change~(e.g.~to
add a new instruction to ErgoScript), describing affected validation rules.
Voting for such breaking changes continues for 32768 blocks and requires at least $90\%$ of
"Yes" votes to be accepted.
Once being accepted, 32768 blocks length activation period started to give time to outdated
nodes to update their software version.
If a node is still not updated after the activation period, it skips the specified checks,
but continues to validate all the known rules.
List of previous soft-fork changes is recorded into the extension to allow light nodes of
any software version to join the network and read current validation rules.